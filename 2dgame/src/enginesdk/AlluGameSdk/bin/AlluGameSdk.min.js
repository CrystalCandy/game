var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),AlluGameSdk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initObj=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.mGameSdk=t[0],e.inst=this,this.minit=!1},e._initCallback=function(){TLog.Debug("static AlluGameSdk::_initCallback"),e.inst.initCallback()},e.prototype.initCallback=function(){TLog.Debug("AlluGameSdk::initCallback"),this.checkInviteStatus(),this.setInviteCallback(),this.checkAttentionStatus()},e._checkAttentionStatusCallback=function(t){TLog.Debug("_checkAttentionStatusCallback",t),e.inst.checkAttentionStatusCallback(t)},e.prototype.checkAttentionStatusCallback=function(t){TLog.Debug("AlluGameSdk::checkAttentionStatusCallback",t),this.mGameSdk.setAttentionStatus(t)},e.prototype.checkAttentionStatus=function(){TLog.Debug("AlluGameSdk::checkAttentionStatus");var t=this.mappid,i=this.mopenid,n=this.mopenkey;allusdk_getFocusState(t,i,n,e._checkAttentionStatusCallback)},e._checkInviteStatusCallback=function(t){TLog.Debug("_checkInviteStatusCallback",t),e.inst.checkInviteStatusCallback(t)},e.prototype.checkInviteStatusCallback=function(t){TLog.Debug("AlluGameSdk::checkInviteStatusCallback",t),this.mGameSdk.setSupportInvite(t)},e.prototype.checkInviteStatus=function(){TLog.Debug("AlluGameSdk::checkInviteStatus"),allusdk_isOpenShare(e._checkInviteStatusCallback)},e._onInviteReturnCallback=function(t){TLog.Debug("_onInviteReturnCallback",t),e.inst.onInviteReturnCallback(t)},e.prototype.onInviteReturnCallback=function(t){TLog.Debug("AlluGameSdk::onInviteReturnCallback",t),this.mGameSdk.onInviteReturn(t)},e.prototype.setInviteCallback=function(){TLog.Debug("AlluGameSdk::setInviteCallback"),allusdk_setShareCallback(e._onInviteReturnCallback)},e.prototype.initSdk=function(){if(this.mopenid=this.mGameSdk.getFromCmdLine("openid"),this.mopenkey=this.mGameSdk.getFromCmdLine("openkey"),this.mnoice=this.mGameSdk.getFromCmdLine("noice"),this.mappid=this.mGameSdk.getFromCmdLine("appid"),this.mopensign=this.mGameSdk.getFromCmdLine("opensign"),this.msign=this.mGameSdk.getFromCmdLine("sign"),this.mserverid=this.mGameSdk.getFromCmdLine("serverid"),this.mopenplatformid=this.mGameSdk.getFromCmdLine("platformid"),this.mopenplatform=this.mGameSdk.getFromCmdLine("platform"),null==this.mopenid||this.mopenid.length<=1)return!1;var t=this.mappid,i={title:"乱斗全明星",imgUrl:"ldqmx.cdnunion.com/h5mxdld/share_icon4.jpg",desc:"二次元女神大乱斗，快来帮我收服这个水兵月！",openId:this.mopenid},n=!0;TLog.Debug("AlluGameSdk::initSdk",t);var o=!1;return o?(TLog.Debug("AlluGameSdk::initSdk cheat"),this.mGameSdk.setAttentionStatus(0),this.mGameSdk.setSupportInvite(!0),this.minit=!0,!0):(TLog.Debug("AlluGameSdk::initSdk","call allusdk_init"),this.minit=allusdk_init(t,e._initCallback,i,n),1!=this.minit?!1:!0)},e.prototype._payCallback=function(t){this.payCallback(t)},e.prototype.payCallback=function(t){1==t?this.mGameSdk.onPayReturn(0,"ok"):0==t?this.mGameSdk.onPayReturn(-2,"cancel"):this.mGameSdk.onPayReturn(-3,"error code:"+t)},e.prototype.login=function(t){var e=this.mGameSdk.getFromCmdLine("openid"),i=this.mGameSdk.getFromCmdLine("noice"),n=this.mGameSdk.getFromCmdLine("sign"),o=this.mGameSdk.getFromCmdLine("openkey"),a=(this.mGameSdk.getFromCmdLine("appid"),{});a.openid=e,a.tstamp=i,a.sign=n,a.loginKey=o,a.openid=e;var l=core.GameSdkUtil.httpParamsToString(a);return this.mGameSdk.onLoginReturn(0,l),!0},e.prototype.pay=function(t){if(1!=this.minit)return!1;var e=core.GameSdkUtil.splitHttpParams(t),i=e.saveValue+e.title;"1000"==e.itemId&&(i=e.title);var n=100*core.GameSdkUtil.toNumber(e.payMoney),o=core.GameSdkUtil.getOSTime(),a=e.itemId+"_"+e.zoneId+"_"+e.roleId+"_"+e.roleName+"_"+o+"_"+e.roleLevel+"_"+e.roleMission,l={orderNo:a,ext:a,appId:this.mappid,openId:this.mopenid,openKey:this.mopenkey,appUserName:e.roleName,subject:i};return allusdk_payOne(n,l,this._payCallback),!0},e.prototype.showShare=function(t){return 1!=this.minit?!1:(allusdk_showShare(),!0)},e.prototype.showAttention=function(t){return 1!=this.minit?!1:(allusdk_showSDKQrCode(),!0)},e.prototype.reportRoleCreate=function(t,e,i,n,o){return TLog.Debug("AlluGameSdk::reportRoleCreate",i),1!=this.minit?!1:(allusdk_reportRoleCreate(t,this.mopenid,n,o,this.mplatform_id),!0)},e.prototype.reportRoleLogin=function(t,e,i,n,o){return TLog.Debug("AlluGameSdk::reportRoleLogin",i),1!=this.minit?!1:(allusdk_reportRoleLogin(t,this.mopenid,n,o,this.mplatform_id),!0)},e.APPID="g2460d3bf0ce7495dc",e.APPKEY="2bc39abf3291a4ccadca4640e646ec00",e}(TClass);__reflect(AlluGameSdk.prototype,"AlluGameSdk",["InterfaceGameSdk"]);